\documentclass[11pt]{amsart}

\usepackage{macros, setspace}
\usepackage{hyperref}
\usepackage{amsmath,amsthm}

\author{Natalie M. Paquette and Brian R. Williams}
\date{\today}
\title{Koszul duality in QFT}

\def\define{\overset{\rm def}{=}}
\def\ep{\varepsilon}
\def\zbar{{\overline{z}}}
\def\Weyl{{\rm Weyl}}
\def\Cl{{\rm C}\ell}
\def\U{{\rm U}}

\def\brian#1{{\textcolor{blue!65!red}{BRW: {#1}}}}
\def\natalie#1{{\textcolor{green!65!black}{NMP: {#1}}}}

%\usepackage[upint]{stix}
\usepackage{cmupint}

\begin{document}
\maketitle

\spacing{1.25}

\section{Introduction}

\section{A biased review of Koszul duality} 

%sym and alt
%maybe a few words about mapping of modules btw derived categories? how does this relate to the line picture?
%CE(g) and U(g)

\subsection{Commutative-Lie duality}

%CE complex

\subsection{Associative-Associative duality} 

%hochschild

\subsection{A look at $\EE_n$ Koszul duality}

\subsection{Deformed Koszul duality}

\section{QFT rudiments}
%clarify: algebra of local ops vs. dense inclusion we work with in practice?

%Explain our conventions/some basic facts about the cohomological degree as ghost number, as well as the meaning of various degree shifts, which are unfamiliar to most physicists. 

\subsection{Local couplings and Maurer--Cartan elements} 

In physics terms, an infinitesimal symmetry of a field theory can be encoded by coupling a background gauge field in a gauge invariant way.



\subsection{Local operators}

Let $\Obs$ be the local operators of a one-dimensional translation invariant theory, and let $Q$ denote the BRST operator which acts on the theory.
The infinitesimal action by translations is through the time derivative $\frac{\partial}{\partial t}$. 

A one-dimensional theory is topological if there exists an endomorphism $\hat{Q}$ of the local operators, of cohomological degree $-1$, which satisfies
\[
\{Q, \hat{Q}\} = \frac{\partial}{\partial t} .
\]
In words, translations along the line are trivial in BRST cohomology. 
%Should we here contrast with notion of topological QFT coming from Q-exact stress tensors, which is a stronger statement?

%To be clarified: even ignoring BV/BRST extensions, we often have the freedom to enlarge the basic space of fields (dual to ops). E.g. U(1) gauge theory in the first order formalism enlarges from (gauge fields) to (gauge fields) x \Omega^{d-2}(M)... how is Koszul duality insensitive to this?

\subsection{Topological descent} 

Let $\Obs$ be the local operators of a one-dimensional topological field theory on $\RR$. 
Because the theory is translation invariant, we can consider the complex of {\em differential form} valued operators
\[
\Omega^\bu(\RR \, , \, \Obs) .
\]
This complex is equipped with the original BRST differential $Q$ acting on $\Obs$ as well as the de Rham differential $\d$. 

Given a local 0-form operator, $\cO = \cO^{(0)} \in \Obs$, we can use the endomorphism $\hat{Q}$ to define the following one-form valued operator
\[
\cO^{(1)} \define (\hat{Q} \cdot \cO) \d t \in \Omega^1(\RR \, , \, \Obs).
\]
The inhomogenous operator $\cO^{(0)} + \cO^{(1)}$ is closed in $\Omega^\bu(\RR \, , \, \Obs)$ if and only if the following descent equations are satisfied 
\begin{align*}
Q \cO^{(0)} & = 0 \\
\d \cO^{(0)} + Q \cO^{(1)} & = 0 .
\end{align*}

Topological descent equations were first explored by Witten in the Donaldson twist of 4d $\cN=2$ theory \cite{W88} as a means to obtain smeared gauge-invariant observables from local operators of higher ghost number. The solutions to the descent equations were constructed more generally in \cite{MW97}; they may also be familiar to string theorists from their application to the BRST cohomology of noncritical string theories, e.g. \cite{WZ92}. 

In particular, if $\{Q,\cO^{(0)}\} = 0$ then $\cO^{(1)}$ defines the following $Q$-closed local functional
\[
\int_{\RR} \cO^{(1)} .
\]
The superscript denotes a 1-form operator, now in cohomological degree (ghost number) 0, as appropriate for a gauge-invariant term in the Lagrangian. 


\subsection{Vacuums and augmentations}

%discrete choices of vacua vs. moduli spaces of vacua

\section{Line operators}
\label{sec:lines}

%universal line defects and Koszul duality
%stress relationship between three perspectives: MC(AxB), Hom(A!, B), couplings as local functionals from descent

\subsection*{Topological mechanics}

%free fermions/bosons in CS example? In 4d CS? Classical limit to connect Assoc/Assoc duality to Comm/Lie? 
%references for lines in 4d N=4, 2d YM, boson and fermion descriptions
%any example where we know, e.g., dim(MC(AxB)) and it's relatively tractable? If so, connect explicitly with Hom & couplings
%3d N=6 topological line?

Ordinary mechanics describes \brian{do it}
Topological mechanics, on the other hand, describes {\em locally constant} paths inside of phase space.

The most basic phase space we consider is the cotangent bundle of affine space $\T^* \RR^n$.
The fields of this system are given by functions $\gamma^i, \beta_j$ on $\RR$ where $i,j=1,\ldots n$. 
The free action is simply
\[
\int_\RR \beta_i \partial_t \gamma^i .
\]
The algebra of operators of the quantum mechanical system is simply the Weyl algebra $\Weyl(\RR^n)$.
This is the free algebra on $2n$ generators $p^i, q_j$ modulo the relation
\[
[p^i, q_j] = \delta^i_j .
\]

There is also a fermionic version of this topological mechanical system. 
Instead of taking the phase space to be $T^* \RR^n$, it is the cotangent bundle of the odd vector space $\Pi \RR^n$.
The fields describing the system are given by {\em odd} functions $\psi^i, \chi_j$ on $\RR$ where $i,j=1,\ldots n$. 
The free action is identical
\[
\int_\RR \chi_i \partial_t \psi^i .
\]
The algebra of operators of the quantum mechanical system is the Clifford algebra $\Cl(\RR^n)$ on $\RR^n$ equipped with its Euclidean metric. 



\subsection*{Coupling to bulk gauge theories}

\subsection{Coupling to line defects} 

Let's suppose we have a field theory on a manifold of the form $\RR_t \times M$ with the property that it is {\em topological} along the $\RR_t$-direction. 
Denote by $\Obs$ the local operators along $\RR_t$. 

Suppose that $\cA$ is an associative algebra which represents some other quantum mechanical system. 
Our goal is to couple $\cA$ to the original theory as a line operator along $\RR_t$. 

\begin{prop}\label{prop:line}
There is a one-to-one correspondence between the space of couplings of $\cA$ to $\Obs$ and the space of Maurer--Cartan elements in 
\[
\Obs \otimes \cA .
\]
\end{prop}

We provide a sketch of the proof of this result. 
Suppose that $\alpha \in $

%explanation about augmentation ideal in more general case should go here

%try to say something about the effect of the transverse directions on this story (topological, holomorphic, general fact alg)
%brief point about BRST vs. BV-BRST
%BV-BRST vs. BRST and `minimal' couplings

\section{Koszul duality: a free theory example}

%\brian{renamed fields in terms of gauge theory above Let us step back and consider the free limit of the 3d gauge theory on $\RR \times \CC$. 
%Set $V = \fg$. 
%It will be useful to slightly rename the fields as $\phi = B$, $\psi_\zbar = A_{\zbar}$, and $\psi_t = A_t$ so that the free action reads
%}

We turn to an illustrative example in three-dimensions of a free field theory on $\RR^3$. In spite of its simplicity, this theory is a useful toy model for illustrating the abstract considerations of the previous section. 
This theory we study is equivalent to the holomorphic twist of the $3d$ $\cN=2$ chiral multiplet. The details of this twist for general 3d $\cN=2$ theories appear in \cite{CDG20}, to which we refer the interested reader for details. 

The component fields of a 3d chiral multiplet of R-charge $r$ include a complex scalar $\phi$ of R-charge $r$ and four fermions $\psi_{\pm}$ with R-charges  $r-1$ and their conjugates $\bar{\psi}_{\pm}$ with R-charges $1-r$. We choose $r=0$ \footnote{Since the R-charge governs the twisted spin of the fields, more general R-charge assignments will result in the fields transforming as sections of certain powers of the canonical bundle: the $r/2$ power for the twisted scalar, and the $1-r/2$ power for the twisted fermion.}.  

The input data is simply a complex vector space $V$ in which the scalar field takes values. (In a more interesting bulk theory where the chiral multiplet were coupled to a $G$ gauge field, then $V$ would be a unitary linear $G$-representation of our choosing). After the holomorphic twist with respect to a choice of supercharge $\bar{Q}_+$, the surviving degrees of freedom are the scalar field and one of the fermions, $\bar{\psi}_-$. One can check from the supersymmetry transformations that these components are $\bar{Q}_+$-closed, but not exact. 

The holomorphic twist involves a choice of coordinates of the form
\[
(t , z) \in \RR_t \times \CC_z \simeq \RR^3
\]
where $t$ is a real coordinate along $\RR$ and $z$ is a holomorphic coordinate along the remaining $\CC \cong \RR^2$ direction. 

Per the discussion of the previous section, one may also perform descent on the two $Q$-closed fields of the twisted theory. If we denote the descendent 1-forms associated to an operator $\mathcal{O}$ by $\mathcal{O}^{(1)}$, then by construction these operators satisfy
\[
\bar{Q}_+(dz \wedge \mathcal{O}^{(1)}) = d (dz \wedge \mathcal{O})
\]
where $d$ is the total exterior derivative on spacetime (which, in the presence of gauge fields, must be covariantized). Equivalently, we have $\bar{Q}_{+}\mathcal{O}^{(1)} = (d\bar{z}\partial_{\bar{z}} + dt \partial_t)\mathcal{O}$. This equation can be solved for the descendent, and the solution is given by $\mathcal{O}^{(1)} = {i \over 2}Q_+ \mathcal{O} d\bar{z} - i Q_- \mathcal{O} dt$. Wedging the one-form descendent with $dz$ produces a 2-form field that can be integrated along a 2-cycle in spacetime to produce a $\bar{Q}_+$-closed operator. 

Computing the corresponding descendants for the scalar and the fermion gives (up to signs and constants we suppress)
\begin{align}
\phi^{(1)} &\sim \psi_{-}dt + \psi_+ d\bar{z} \\
\bar{\psi}^{(1)} &\sim \partial_{\bar{z}}\phi dt + \partial_t \phi d\bar{z}.
\end{align}

In the twisted formalism of \cite{ACNV}, reviewed in \cite{CDG}, one instead writes the action in the first-order, BV formalism and removes $\bar{Q}_+$-exact terms. Performing such a rewriting of the action will in general yield a different algebra of local operators than that of the original theory, but the two algebras will be quasi-isomorphic to one another (i.e. with identical $\bar{Q}_+$-cohomology and any higher operations).\natalie{comment here about Koszul duality?}
The scalar in the twisted, first-order theory is identical to the scalar in the physical theory with its twisted spin, and for $r=0$ they are simply identical. There is also a fermion $\psi$ in the twisted theory that may be identified, in the physical theory, with $i \bar{\psi}^{(1)}$.

Hence, our fields consist of a scalar $\phi$ valued in $V \simeq \mathbb{C}$ and a partial one-form 
\[
\psi = \psi_t \d t + \psi_\zbar \d \zbar 
\]
valued in $V^*$, the dual vector space.
The free action reads
\[
\int_{\RR^3} \phi \partial_t \psi_\zbar + \int_{\RR^3} \phi \partial_\zbar \psi_t 
\]
which, after integration by parts, can be written more compactly in the twisted theory as\footnote{Although $\phi^{(1)}$ does not appear in the action, it plays an interesting role in understanding higher operations (brackets); see \cite{CDG} for details.} \natalie{right?}

\[
\int(dz \wedge \psi) d\phi.
\]

We may return to the physical theory for a free chiral multiplet from this twisted representation by adding a quadratic term for $\psi$ and integrating it out to return it to its on-shell value. Such quadratic terms are killed in the twisted formalism because they are $\bar{Q}_+$-exact.  

The equations of motion for the scalar $\phi$ are
\[
\frac{\partial}{\partial t} \phi = 0; \quad
\frac{\partial}{\partial \zbar} \phi = 0 .
\]
The first equation implies that $\phi$ is constant in the $t$-direction and the second implies that $\phi$ is holomorphic in the variable $z$. 
The equation of motion for the one-form field $\psi$ reads
\[
\frac{\partial}{\partial t} \psi_\zbar - \frac{\partial}{\partial \zbar} \psi_t = 0 .
\]

There is an abelian gauge symmetry which acts on the $\psi$-fields, while leaving $\phi$ invariant.
The gauge symmetry is given by a $V^*$-valued scalar $\chi$ which acts on the fields by
\begin{equation}\label{eqn:freegauge}
\delta \psi_t = \frac{\partial}{\partial t} \chi; \quad
\delta \psi_\zbar = \frac{\partial}{\partial \zbar} \chi .
\end{equation}

This ghost $\chi$ in the twisted theory is precisely $i \bar{\psi}_-$ in the physical theory. The BRST transformation of the twisted theory is identified with the SUSY transformation in the physical theory. Indeed, one may compute the SUSY transformation of $\psi$ and observe that it coincides with this symmetry on-shell. 

\subsection*{Local operators}

We move towards a description of the algebra of local operators \textit{of all cohomological degrees} at $z = t = 0$, up to gauge equivalence. We recall that (local) operators are (local) functionals on the space of fields, so that while the field $\phi$ is valued in $V$, its local dual operator is valued in $V^*$. Although we are treating operators in this section, we will make use of the standard physics abuse of notation and denote them by the same symbols as the corresponding fields \footnote{Properly speaking, the R-charges we listed in the previous section were also those of the local operators. The fields have the opposite charges.}. 

The equations of motion imply that the $\phi$ has vanishing $t$ and $\zbar$-derivatives. 
Thus, the only local operators built from $\phi$ must be given by holomorphic $z$-derivatives. 
Let $V^*_{(n)} \simeq V^*$ denote the span of the local operators of the form $\partial_z^n \phi(0)$.
Thus, the linear local operators in $\phi$ comprise the vector space $\oplus_{n \geq 0} V_{(n)}^*$.
Since $\phi$ is a scalar, the algebra of operators involving only $\phi$ combine to form the symmetric algebra ${\rm S}^\bu \left(\oplus_{n \geq 0} V^*_{(n)}\right)$.

Next, consider local operators of the one-form field $\psi = \psi_t \d t + \psi_\zbar \d \zbar$. 
We claim that up to gauge equivalence there are no nontrivial local operators depending on $\psi_t, \psi_\zbar$.  
The easiest way to see this is to introduce the two-form field
\[
\d z \wedge \psi = \psi_t \d z \wedge \d t + \psi_\zbar \d z \wedge \d \zbar .
\]
Then, the equations of motion are equivalent to the condition that this two-form be closed for the de Rham differential
\[
\d \left(\d z \wedge \psi\right) = 0 .
\]
In other words, $\d z \wedge \psi \in Z^2 (\RR^3)$. 

In terms of the two form field $\d z \wedge \psi$ there is a one-form gauge symmetry by the field $\d z \wedge \chi$. 
In this notation, the gauge symmetry simply reads $\delta (\d z \wedge \psi) = \d (\d z \wedge \chi)$, which is completely equivalent to Equation \eqref{eqn:freegauge}.
By a slight refinement of the Poincar\'{e} lemma for partial one-forms forms\footnote{This version of the Poincar\'{e} lemma is simply the statement $H^1_{\rm dR} (\RR) = H_{\dbar}^{0,1}(\CC)= 0$.}, there exists $\chi$ such that the one-form $\d z \wedge \chi$ renders $\d z \wedge \psi \in Z^2(\RR^3)$ gauge trivial. 


Finally, consider local operators built from the ghost field $\chi$. 
The gauge transformations preserving $\psi = 0$ satisfy $\frac{\partial}{\partial \zbar} \chi = \frac{\partial}{\partial t} \chi = 0$. 
Thus, similarly to $\phi$, the local operators one can build from $\chi$ only involve holomorphic $z$-derivatives. 
Let $V_{(n+1)} \simeq V$ denote the span of the local operators of the form $\partial_z^n \chi(0)$.
Thus, the linear local operators in $\chi$ comprise the vector space $\oplus_{n > 0} V_{(n)}$.
Since $\chi$ is a gauge symmetry, the algebra of operators involving only $\chi$ combine to form the exterior algebra $\wedge^\bu \left(\oplus_{n > 0} V_{(n)}\right)$ \footnote{More precisely, we obtain the {\em graded symmetric} algebra $\Sym(V_{(n)}[-1])$ of $V_{(n)}$ concentrated in degree $+1$.
We will only use the underlying $\ZZ/2$-graded vector space in this section.}. Note that the operators coming from $\chi$ are concentrated in cohomological degree 1 and higher, as expected. Note that in the twisted theory, cohomological degree is identified with the R-charge of the twisted fields, which further coincides with ``ghost number'' in this example. 

Summarizing our discussion thus far, we see that the local, or 0-form, operators are of the form
%\[
%{\rm S}^\bu \left(z^{-1} V^*[z^{-1}]\right) \otimes \wedge^\bu \left(V[z^{-1}]\right)
%\]
%which we can slightly rewrite as
\[
\Obs_0 = \bigotimes_{n \geq 0} {\rm S}^\bu \big(V^*_{(n)}\big) \otimes \bigotimes_{m > 0} \wedge^\bu \big(V_{(m)}\big)
\]
where $V_{(n)}^* \simeq V^*$ indicates the vector space spanned by local operators of the form $\partial^n_{z} \phi(0)$ and $V_{(m+1)} \simeq V$ indicates the vector space spanned by local operators of the form $\partial^{m}_z \chi$. 

\natalie{Do we want to say anything about the higher products in this example/how they behave under Koszul duality? It may involve a longer interlude regarding secondary brackets, etc.}

\subsection*{Character of local operators}

We contemplate the following two symmetries of the free theory.
The first corresponds to conformal symmetries along the $z$-plane. 
Concretely, consider the piece of this generated by $\U(1)$ rotations of $\CC_z$.
Infinitesimally, this is generated by the holomorphic vector field $z \frac{\partial}{\partial z}$. 

Second, there is a $\U(1)$ flavor symmetry, where $\phi$ transforms with charge $+1$ and $\psi$ transforms in the dual representation, $-1$.

The character of the chiral algebra furnished by the space of local operators $\Obs_0$ can be written in terms of fugacities $q$ and $s$ where $q$ is the fugacity of the $\U(1)$ conformal symmetry and $s$ is the fugacity of the $\U(1)$ flavor symmetry. The fugacity $q$ is conjugate to the twisted spin $J$, the fugacity $s$ is conjugate to the flavor charge $e$, and $r$, the R-charge, is the homological grading:
\[
\chi_0(q , s) := \Tr (-1)^r q^J s^e =  \frac{(q s^{-1} ; q)_\infty}{(s ; q)_\infty}  = \prod_{n \geq 0} \frac{1 - s^{-1} q^{n+1}}{1 - s q^n}.
\]

This is nothing but the usual expression for the supersymmetric index of a free chiral multiplet. The degrees of freedom counted by this index are given by the $\bar{Q}_+$-closed fields in the physical theory: $\left\lbrace \partial_z^n \phi \right\rbrace_{n \geq 0}, \left\lbrace \partial_z^n \bar{\psi}_- \right\rbrace_{n \geq 0}$. The former have $r=0, J = n$ and the latter have $r=1, J= n+1$. These perfectly match the local operators in the twisted theory generated by holomorphic derivatives of $\phi, \chi$ as enumerated in the previous subsection.

\subsection*{Line operators}

We turn to an interpretation of the Koszul dual of the algebra of local operators of the bulk theory, namely $\Obs_0 = \bigotimes_{n \geq 0} {\rm S}^\bu \big(V^*_{(n)}\big) \otimes \bigotimes_{m > 0} \wedge^\bu \big(V_{(m)}\big)$. 

As we have explained, we consider the coupling of our bulk theory to a topological theory on the topological line given by $\mathbb{R}_t$. Koszul duality will arise in terms of such line operators of the original three-dimensional theory. 
As this theory is free, the analysis here is quite simple, but it we hope it serves as an instructive exhibition of the general discussion in Section \ref{sec:lines}. 

Let us consider the space of local operators at the origin $\Obs_0$. 
As announced in the general section, we are to interpret the Koszul dual of this algebra as the algebra of local operators on the ``universal line defect''.
In this example, the defect we are considering is along the topological line $\{z=0\} \subset \RR \times \CC$. 
Per our analysis in the previous section, we perform topological descent on all Maurer-Cartan elements of the algebra of operators on the line $\mathcal{A}\otimes \mathcal{B}$ to obtain the space of possible perturbative couplings, where $\mathcal{A} \simeq \mathbb{C}[\phi, \chi]$ is the algebra of bulk operators restricted to the line and $\mathcal{B}$ is our (at the moment arbitrary) auxiliary algebra of operators. 

Any Maurer-Cartan element, governing first-order deformations of our uncoupled system, lives in degree one by definition. This leaves us with two options in our example. We may perform descent on $\partial_z^n \chi \otimes J$ where $|\chi| = 1, |J|=0$, or we may perform descent on $\partial_z^n \phi \otimes K$, where $|\phi|=0, |K| = 1$.  At the moment, $J, K \in \mathcal{B}$ are stand-ins for some arbitrary local operators of the appropriate cohomological degree, and we will denote their descendants by a defect algebra endomorphism $\hat{Q}_{d}$ (which need not to be the same as the $\hat{Q}$ acting on the bulk algebra) by $J^{(1)}, K^{(1)}$. 


%We choose a basis $\{e_a\}$ for $V$. 
The most general coupling then takes the form
\[
\sum_{\ell \geq 0} \int_{\{z=0\}} \frac{1}{\ell!} K^{(1)} [\ell] \partial_z^\ell \phi + \sum_{k \geq 0} \int_{\{z=0\}} \frac{1}{k!} J[k] \partial_z^k \psi_t  + \sum_{j \geq 0} \int_{\{z=0\}} \frac{1}{j!} K[j] \partial_z^j \phi_t +  \sum_{i \geq 0} \int_{\{z=0\}} \frac{1}{i!} J^{(1)}[i] \partial_z^i \chi.
\] 


Notice that only the $\d t$-components of the one-forms $\psi, \phi^{(1)}$ may couple to a field along the defect, which we denote by $\psi_t, \phi_t$. 
Also, observe that while the one-form field $\psi_t$ couples to a scalar $J[k]$ along $\RR_t$, the field $\phi$ couples to a one-form $K^{(1)}[\ell] = K_t [\ell] \d t$ along $\RR_t$ (and vice versa for their counterparts). In total, all of the couplings are one-forms along $\RR_t$ with ghost number 0. 

Although $\psi^{(1)}, \phi$ appeared in the original action of our twisted theory, the local operators and their descendants are treated democratically when we generate the line defect couplings: we start with the tensor products of local operators (of any ghost number) from both the bulk and defect algebra and perform descent on the Maurer-Cartan elements, using the assumption that both the bulk and line defect theories are topological. The resulting set of couplings is therefore slightly redundant \footnote{The BV formalism provides an elegant way to avoid these redundancies from the outset, though we avoid using it in this note for clarity of presentation.}. In other words, we must really work the space of Maurer-Cartan elements \textit{modulo gauge redundancies}. It is natural to expect that we can obtain a complete set of couplings only involving fields that appeared in our original action, $\phi, \psi^{(1)}$.

For example, consider the coupling $\int J \psi_t$ and its gauge transformation $\psi_t \mapsto \psi_t + d_t \chi$. Requiring a gauge invariant coupling is equivalent to requiring that $\int J d_t \chi$ vanishes. Integrating by parts yields the equation of motion for $J$: $d_t J = 0$. One can instead rewrite 


%If we assume that the theory along the defect is {\em topological} we are forced to introduce an abelian gauge symmetry for the currents $\{K_t^a [\ell]\}$ which says 
%\[
%Q_{\rm defect} K_t^a[\ell] = \partial_t \mathfrak{k}^a [\ell] .
%\]






\subsection*{Dimensional reduction}

Consider, for a moment, the restriction of this free theory to the submanifold 
\[
\RR \times (\RR_{>0} \times S^1) \simeq \RR \times \CC^\times \subset \RR \times \CC .
\]
We will contemplate the dimensional reduction along $S^1$ factor and the resulting two-dimensional field theory on $\RR \times \RR_{>0}$. 
We will continue to denote the coordinate on the first $\RR$ by $t$, and will denote the coordinate on $\RR_{>0}$ by the circle radius $r$.  

For the naive dimensional reduction, we remember just the lowest lying $S^1$ modes. 
The resulting free theory simply consists of fields
\[
\phi_0(t,r) \in C^\infty(\RR \times \RR_{>0} , V) ; \quad \psi_0 (t,r) \in \Omega^1 (\RR \times \RR_{>0}, V^*) 
\] 
with action $\int_{\RR\times \RR_{>0}} \phi_0 \d \psi_0$.
There is, in addition, a topological gauge symmetry $\delta \psi_0 = \d \chi_0$. 

Of course, we have missed out on all of the higher $S^1$ modes present in the three-dimensional theory. 
More accurately what we should do is expand the fields $\phi, \psi$ into their Fourier modes around the circle.
We will then obtain a two-dimensional theory on $\RR \times \RR_{>0}$ with an infinite number of fields each labeled by their Fourier mode around the circle. 

Writing the complex coordinate as $z = r e^{i \theta}$ we obtain a decomposition of the three-dimensional fields on $\RR \times \CC^\times$:
\begin{align*}
\phi(t,z) & = \sum_{n \in \ZZ} \phi_n (t,r) e^{2 \pi i n \theta} \\
\psi(t,z) & = \frac{1}{2 \pi i z} \sum_{n \in \ZZ} \psi_n(t, r) e^{2 \pi i n \theta} .
\end{align*}

If we expand the free action, we see that the theory on $\RR \times \RR_{>0}$ has as its fields 
\[
\{\phi_n(t,r)\}_{n \in \ZZ} \in C^\infty(\RR \times \RR_{>0} , V) ; \quad \{\psi_n (t,r)\}_{n \in \ZZ} \in \Omega^1 (\RR \times \RR_{>0}, V^*) .
\] 
with free action
\[
\sum_{n \in \ZZ} \int_{\RR \times \RR_{>0}} \bigg(\phi_n \d \psi_{-n} + n \phi_n \psi_{-n} (r^{-1} \d r)  \bigg).
\]

Without the second term, this free action is equivalent the topological $B$-model with target the algebraic loop space $L V = V[z,z^{-1}]$.  \natalie{citation}
The second term includes a background gauge field for the symmetry of loop rotations. \natalie{spell this out more?}

There is an overall gauge symmetry of this dimensionally reduced action by an integers' worth of fields $\{\chi_n (t,r)\}_{z \in \ZZ}$ which acts via $\delta \psi_n (t,r) = \d \chi_n (t,r)$, where $\d = \d t \,\partial_t + \d r \,\partial_r$ is the two-dimensional de Rham operator. 

So far we have provided a description of the $S^1$ reduction of the theory on $\RR \times \CC^\times$ to $\RR \times \RR_{>0}$. 
The fact that this theory was defined on the affine space $\RR \times \CC$ determines a natural boundary condition for this dimensional reduction at $r = 0$, thus extending it to a theory on $\RR \times \RR_{\geq 0}$. 
This boundary condition reads
\begin{equation}\label{eqn:bc1}
\phi_n (t, 0) = 0 ; \quad \psi_{n+1} (t,0) = 0 \quad {\rm for} \; n < 0 .
\end{equation}
We must also require that the gauge field satisfy a compatible boundary condition:
\begin{equation}\label{eqn:gbc1}
\chi_{n+1} (t,0) = 0, \quad {\rm for} \; n < 0 .
\end{equation}

We observe that the corresponding operators at $t = r = 0$ of this dimensionally reduced theory agree precisely with the local operators $\Obs_0$ we found from the three-dimensional point of view above. 
Indeed, they are freely generated, up to gauge equivalence, by the even local operators $\{\phi_n\}_{n \geq 0}$ and the odd local operators $\{\chi_n\}_{n > 0}$. 
In the notation of the previous section $\phi_n$ corresponds to a scalar multiple of $\partial_z^n \phi$ and $\chi_n$ a scalar multiple of~$\partial^{n-1}_z \chi$. 

\subsection*{A `dual' boundary condition} 

We define another boundary condition of this dimensionally reduced two-dimensional theory which is `dual' to the one we have just discussed. 

In fact, we will actually construct this boundary condition at the level of the three-dimensional theory on $\RR_t \times \CC_z$ at $z = \infty$. 
This amounts to extending the theory on affine space $\RR \times \CC$ to a theory on $\RR \times \PP^1$ by fixing the behavior for the fields at $z = \infty$. 

The boundary conditions we choose are the following:
\begin{itemize}
\item the scalar $\phi$ vanishes at $\infty \in \PP^1$. 
That is $\phi$ is actually a section of the line bundle $\cO(-1)$ \footnote{More accurately this bundle should be written as $\pi^* \cO(-1)$ where $\pi \colon \RR \times \PP^1 \to \PP^1$ is the projection.}, 
\[
\phi \in \Gamma \left(\RR \times \PP^1 \, , \, \cO(-1) \otimes V \right) 
\]
\item the components of the one-form $\psi_{t}, \psi_{\zbar}$ have simple poles at $\infty \in \PP^1$.
That is, $\psi_t,\psi_{\zbar}$ are twisted by the line bundle $\cO(1)$,
\[
\psi_{t}, \psi_{\zbar}\in \Gamma\left(\RR \times \PP^1 \, , \, \cO(1) \otimes V^*\right)
\]
\end{itemize}

Additionally, we must fix the boundary behavior of the gauge field $\chi$ to be compatible with the above choices.
A natural way to do this is to require the gauge field to acquire a simple pole at $\infty \in \PP^1$, just like the $\psi$-fields:
\[
\chi \in C^\infty\left(\RR \times \PP^1 \, , \, \cO(1) \otimes V^*\right) .
\]

This choice of a boundary condition results in a very special property of the theory upon compactification along $\PP^1$.

\begin{lem}\label{lem:compactP1}
The compactification of the theory along 
\[
\begin{tikzcd}
\RR \times \PP^1 \ar[d] \\ \RR
\end{tikzcd}
\]
results in the trivial one-dimensional theory. 
\end{lem}
\begin{proof}
The point is that every solution to the equations of motion is gauge equivalent to the trivial solution. 
For the scalar $\phi$, notice that the equations of motion require it to be constant along $\RR$ and holomorphic $\dbar \phi = 0$. 
Since there are no global holomorphic sections on $\PP^1$, we see that $\phi$ must be the trivial solution. 

The remaining equations of motion are
\[
\frac{\partial}{\partial \zbar} \psi_t - \frac{\partial}{\partial t} \psi_\zbar = 0 .
\]
\brian{finish} \footnote{This follows from the fact that $\chi$ and $\psi$ comprise the cohomology $H^\bu(\PP^1, K_{\PP^1} \otimes \cO(1))$ which is trivial.}

%Again, $\psi_t$ is required to be constant along $\RR$ and be holomorphic $\dbar \psi_t = 0$. 

\end{proof}

Let us translate this boundary condition to the $S^1$-reduction of the three-dimensional theory to $\RR \times \RR_{>0}$. 
This boundary condition determines the behavior of the two-dimensional fields as $r \to \infty$, which we read off to be 
\begin{equation}\label{eqn:bc2}
\phi_n (t, \infty) = 0 ; \quad \psi_{n+1} (t, \infty) = 0 \quad {\rm for} \; n \geq 0 .
\end{equation}
We must also require that the gauge field satisfy a compatible boundary condition:
\begin{equation}\label{eqn:gbc2}
\chi_{n+1} (t,0) = 0, \quad {\rm for} \; n \geq 0 .
\end{equation}

\subsection*{Comparing boundary conditions}

We compare these to the boundary conditions at $r=0$ in Equations \eqref{eqn:bc1} and \eqref{eqn:gbc1}. 
Furthermore, the boundary condition at $r = \infty$ tells us how to extend the theory on $\RR \times \RR_{\geq 0}$ to its one-point compactification. 
Furthermore, by Proposition \ref{lem:compactP1} we know that the reduction along the compact direction results in a trivial one-dimensional theory.

By the general principal \brian{write section above} we expect the local operators $\Obs_0$ at $r = 0$ to be Koszul dual to the local operators $\Obs_\infty$ at $r = \infty$. 

From Equations \eqref{eqn:bc1} and \eqref{eqn:gbc1} we can compute the gauge equivalence classes of local operators $\Obs_\infty$ at $r = \infty$ in a very similar way as we did for $r = 0$. 
The algebra is freely generated by the even local operators $\{\phi_n\}_{n < 0}$ and the odd local operators $\{\chi_n\}_{n \leq 0}$. 
In other words
\[
\Obs_\infty = \bigotimes_{n < 0} {\rm S}^\bu \big(V^*_{(n)}\big) \otimes \bigotimes_{n \leq 0} \wedge^\bu \big(V_{(m)}\big)
\]
which we can clearly identify as the Koszul dual algebra to $\Obs_0$. 

Its instructive to compare characters of local operators at $r = 0, \infty$. 
We have already computed the character $\chi_0(q,s)$ of the algebra $\Obs_0$ above. 
At $r=\infty$ the character reads 
\[
\chi_\infty (q,s) = \prod_{n \geq 0} \frac{1 - s^{-1}q^{-n}}{1 - s q^{-n-1}}
\]

Observe that $\chi_0 (q,s) = \chi_\infty (q, s^{-1})$. 
\brian{how to explain the $s$-flip? this is just some linear duality. Can we make a statement at the level of the $G_f$ index?}

\subsection*{Topological limit}

It's already instructive to think about a degenerate limit of $S^1$ reduced theory. 
If we just remember the {\em lowest} lying $S^1$-modes, we have see that observables at $r=0$ are simply the free algebra on the even operator $\phi_0$, thus the subalgebra of lowest lying modes of the algebra $\Obs_0$ is
\[
\Obs_0^{(0)} = {\rm S}^\bu(V^*).
\]

On the other hand, at $r=\infty$ the lowest lying linear operator that survives is the {\em odd} operator $\chi_0$.
So, the subalgebra of lowest lying modes of the algebra $\Obs_\infty$ is
\[
\Obs_\infty^{(0)} = \wedge^\bu(V) .
\]

We recognize that $\Obs_0^{(0)}$ and $\Obs_\infty^{(0)}$ witness the prototypical example of Koszul duality for free algebras. 




\section{``Critical'' Chern--Simons theory}

%Add a few sentences about how CS theory at the critical level can still give a nontrivial topological theory when written in the first order formalism... need to connect to the familiar Lagrangian before jumping in to the BF-type theory. 
Let $\fg$ be a Lie algebra. 
The theory has two sets of fields
\begin{align*}
A & = A_{\zbar} (z,t) \d \zbar + A_{t} (z, t) \d t \\
B & = B (z,t) 
\end{align*}
with $A_{\zbar}, A_t, B$ all $\fg$-valued functions on $\RR^3$.
In other words, the fields consist of a partial connection $A$ and a smooth $\fg$-valued function $B$.

The action is of ``BF'' type:
\begin{align*}
\int \d z \; B F_A & = \int \d z \; \Tr(B \d A) +  \frac12 \int \d z \; \Tr(B [A,A]) \\
& = \int \Tr(B \partial_t A_{\zbar} + B \partial_{\zbar} A_t + B [A_t, A_\zbar]) .
\end{align*}
Notice that in the kinetic part of the action only $\partial_t$ and $\partial_{\zbar}$ derivatives appear since $B$ is a Dolbeault form of type $(1,0)$. 

The Lie algebra of gauge symmetries is the familiar one: $C^\infty(\RR^3) \otimes \fg$, i.e. smooth functions valued in $\fg$. 
An element $\fc \in C^\infty(\RR^3) \otimes \fg$ acts on the fields via the transformation rule
\begin{align*}
\delta A_\zbar & = \partial_{\zbar} \fc + [\fc, A_\zbar] \\
\delta A_t & = \partial_t \fc + [\fc,A_t] \\
\delta B & = [\fc, B] .
\end{align*}

The classical BRST complex of local operators supported at $(z,t) = (0,0)$ is equivalent to the Chevalley--Eilenberg complex
\[
\clie^\bu \left(\fg[\ep][[z]]\right)
\] 
which computes Lie algebra cohomology of the ($\infty$-dimensional) Lie algebra $\fg[\ep][[z]]$. 

%Here I plan to add a few sentences explaining that CE cohomology is the usual BRST for physicists.

Let's describe this complex more explicitly. 
Pick a basis $\{e_a\}_{a = 1,\ldots, \dim \fg}$ for $\fg$ with dual basis $\{e^a\}$ for $\fg^*$. 
Explicitly, the Lie algebra cohomology representing local operators is computed by 
\[
\bigg(\Sym\left(\fg^*[\ep] [\partial_z] [-1] \right) \; , \; Q_0 \bigg) = \bigg(\CC[\fc^a, \partial_z \fc^a , \partial^2_z \fc^a, \ldots, B^a , \partial_z B^a , \partial_z^2 B^a, \ldots]_{a=1, \ldots, \dim \fg} \; , \; Q \bigg)
\]
where the BRST operator encodes the Lie bracket on $\fg[\ep][[z]]$ and is given by \brian{write formula}

In the description above we have used the following linear local operators
\begin{align*}
\partial_z^n \fc^a \colon & \fc_b \mapsto \delta_b^a \partial^n_z \fc_b (z=t=0), \\
\partial_z^n B^a \colon & B_b \mapsto \delta_b^a \partial_z^n B_{b,z} (z=t=0) 
\end{align*}
where $n \in \ZZ_{\geq 0}, a = 1,\ldots, \dim \fg$. 
These families of operators are of cohomological degrees $+1$, $0$ respectively. 

Perturbatively, the {\em quantum} BRST complex is a certain $\hbar$-deformation of the classical BRST complex which we will schematically denote
\[
\clie^\bu_\hbar (\fg[\ep][[z]])  .
\]
As a graded vector space, this quantum complex is obtained from the classical one simply by adjoining the formal variable $\hbar$. 
Quantum effects modify the classical BRST operator as in
\[
Q = Q_0 + \hbar Q_1 + \cdots .
\]
\brian{some comment about only working to first order in what follows}

\subsection*{Line operators}

By Proposition \ref{prop:line}, there is a one-to-one correspondence between line defects along
\[
\RR \times \{z=0\} \subset \RR^3 
\]
described by an associative algebra $\cA$ and Maurer--Cartan elements in 
\begin{equation}\label{eqn:criticalobs}
\clie_\hbar^\bu(\fg[\ep][[z]]) \otimes \cA .
\end{equation}

This Maurer--Cartan equation reads
\begin{equation}\label{eqn:mccs}
Q \cO^{(0)} + \cO^{(0)} \star_\hbar \cO^{(0)} = 0 
\end{equation}
where $Q$ is the quantum BRST operator acting on the gauge fields and $\star_\hbar$ is the quantum associative product (which we have not yet claimed to fully characterize). 

For now, we treat the bulk gauge field as classical.
Then, the quantum BRST operator $Q$ is replaced by the classical BRST operator $Q_0$ which is simply the Chevalley--Eilenberg differential for the Lie algebra $\fg[\ep][[z]]$.
The product $\star_\hbar$ is replaced by the product $\star$ in the algebra $\cA$. 
Thus, the classical limit of \eqref{eqn:mccs} becomes
\begin{equation}\label{eqn:cmccs}
Q \cO^{(0)} + \cO^{(0)} \star \cO^{(0)} = 0 .
\end{equation}

\subsection*{An example: free fermions}

We spell out the correspondence between Maurer--Cartan elements as in \eqref{eqn:cmccs} and {\em classical} local couplings in the case that $\cA$ is the algebra of local operators of the free fermion topological mechanics system of rank $N$. 

In this case, $\cA$ is isomorphic to the Clifford algebra $\Cl(\RR^N)$. 
Systematically, we know how to describe this as the algebra of operators of the quantum mechanical theory on $\RR \times \{z=0\}$ whose fields are odd functions $\chi_i, \psi^j$ for $i,j=1,\ldots, N$. 

We look at operators supported on the line $\RR \times \{z=0\}$ which depend on the both the gauge field and the free fermion system.
Consider, for example, the local operator
\[
\rho_{a,i}^{j} \fc^a \psi^i \chi_j 
\]
for some collection of coefficients $\{\rho_{a,i}^{j}\}$. 
Call this local operator $\cO^{(0)}$. 
Notice that $\cO^{(0)}$ is of cohomological degree $+1$.
The classical Maurer--Cartan equation \eqref{eqn:cmccs} reads
\[
f_{bc}^a \rho_{a,i}^{j}  \fc^b \fc^c \psi^i \chi_j + .. = 0. 
\]
This equation simply says that the collection $\{\rho_{a,i}^{j} \}$ prescribes a representation of the Lie algebra $\fg$ on the vector space $\RR^N$ which we can think of as a map of Lie algebras 
\[
\rho \colon \fg \to \End(\RR^N)
\]
which maps $e_a$ to the $N \times N$ matrix $\rho(e_a) = (\rho_{a,i}^{j})$. 

To construct the coupling, we solve the descent equations $\partial_t \cO^{(0)} + Q \cO^{(1)} = 0$.
Following the general discussion of topological descent in Section \ref{sec:descent}, we first construct an endomorphism $\hat{Q}$ acting on local operators which trivializes infinitesimal time translations: $\{Q, \hat{Q}\} = \partial_t$. 

It is important here that we work with the full cochain complex of local operators, including those which are cohomologically trivial. 
For instance, consider the local opeartor $A^a_t$ of degree zero which is defined by
\[
A^a_{t} \colon A_b \mapsto \delta^a_b A_{b,t} (t=0, z=0) .
\]
This operator is cohomological trivial as it is in the image of \brian{how do physicists say this?}

On the $\fc$-ghosts, the operator $\Hat{Q}$ is defined by 
\[
\hat{Q} \cdot \fc^a = A^a_t  .
\]
Since we are imposing the equations of motion for the fields of the free fermion system, it suffices to declare that $\hat{Q}$ annihilates operators built from $\psi$ and $\chi$. 
\brian{here a remark about BV is probably good}

We use $\hat{Q}$ to obtain the one-form valued operator from $\cO^{(0)}$ by the formula
\begin{align*}
\cO^{(1)} & = (\hat{Q} \cdot \cO^{(0)}) \, \d t \\
& = \rho_{a,i}^j (\hat{Q} \fc^a) \psi^i \chi_j \, \d t \\ 
& = \rho_{a,i}^j A^a \psi^i \chi_j \, \d t .
\end{align*}

This leads to the following Lagrangian coupling
\[
\int_{\RR \times \{z=0\}} \rho_{a,i}^j \chi_j  A_t \psi^i  .
\]
More generally, for any $k \geq 0$ we could have started with the local operator 
\[
\sum_{k \geq 0} \frac1{k!} \rho_{a,i}^j [k] \partial_z^k \fc^a \chi_j \psi^i .
\]
This leads to the Lagrangian coupling
\[
\sum_{k \geq 0} \int_{\RR \times \{z=0\}} \frac{1}{k!} \rho_{a,i}^j[k] \chi_j \partial_z^k A_t \psi^i .
\]



\subsection*{Koszul duality and local operators}

In this section we characterize, to first-order in $\hbar$, the algebra which is Koszul dual to the algebra of local operators of the three-dimensional gauge theory.

We will argue that the most general coupling takes the form
\[
\sum_{k \geq 0} \int_{\RR \times \{z=0\}} \frac{1}{k!} J_a [k] \partial_z^k A^a_t + \sum_{\ell \geq 0} \int_{\RR \times \{z=0\}} \frac{1}{\ell!} K_a[\ell] \partial_z^k B_t^a 
\] 

\brian{here's where I'm a little stuck without BV.
That last term is only present when you include the antifield $B_t$.
This is the anti-field to $A_{\zbar}$.
}

\begin{prop}
The Koszul dual to the algebra of operators of the $3d$ gauge theory on $\RR \times \CC$ is the dg algebra generated by elements $J_a[k],K_a [\ell]$, $k,\ell \geq 0$, $a = 1,\ldots, \dim \fg$ of cohomological degree zero and degree $+1$, respectively, satisfying the relations
\begin{align*}
[J_a [k] , J_b [\ell]] & = f_{ab}^c J_{c} [k+\ell] \\
[J_a [k], K_b[\ell]] & = f_{ab}^c K_c [k+\ell] .
\end{align*} 

Furthermore, on generators, the differential is of the form
\begin{align*}
\d J_a[k] & = \hbar \sum_{r + s = k} \kappa f J_b[r] K_c[s] + O(\hbar^2) \\
\d K_a[k] & = \hbar \sum_{r + s = k} \kappa f K_b[r] \Tilde{J}_c[s] + O(\hbar^2)
\end{align*} 
\brian{figure out indices}
\end{prop}

Clasically, this proposition is a generators and relations description of the graded algebra 
\[
U(\fg[\ep][z])
\]
where the linear generators are $J_a[k] = z^k \ft_a$ and $K_a [k] = \ep z^k \ft_a$. 


In Section \ref{sec:??} we have argued generally how the relations of the Koszul dual algebra arise by demanding that terms in the path integral involving the coupling to the line defect are BRST invariant. 
We work out explicitly how these relations come from an analysis of the BRST invariance of the tree-level path integral for this system.

\subsection*{Tree-level diagrams}

$\bullet$
Let us first consider the classical commutation relation 
\begin{equation}\label{eqn:rel1}
[J_a [k] , J_b [\ell]] = f_{ab}^c J_{c} [k+\ell] 
\end{equation}
in the classical limit of the Koszul dual algebra. 

The BRST variation of the term \brian{write path integral above} in the path integral vanishes provided
\[
\int_t \sum_k \frac1{k!} \partial_z^k \left(f_{bc}^a \fc^b(t) A^c_t (t) \right) J_a[k] (t) = \int_t \sum_{\ell,m} \frac1{\ell!} \frac1{m!} \partial^\ell \fc^d (t) \partial^m A^e (t) [J_d (t), J_e(t)]  .
\] 
To obtain the commutation relation \eqref{eqn:rel1}, one sets 
\begin{align*}
A_t & = \ft_b z^{m} \delta_{t=0} \\
\fc & = \ft_a z^\ell .
\end{align*}

This commutation relation is equivalent to the cancellation of the gauge variation of the tree-level Feynman diagrams in Figure~\ref{fig:cancel1}.

\begin{figure}
	\begin{tikzpicture}
	\begin{scope}
		\node[circle, draw] (J1) at (0,1) {$J$};
		\node[circle, draw] (J2) at (0,-1) {$J$};
		\node (A1) at (2,1)  {$A_{t}$};
		\node (A2) at (2,-1)  {$A_{t}$};
		\draw[decorate, decoration={snake}] (J1) --(A1);
		\draw[decorate, decoration={snake}] (J2) --(A2);
		\draw (0,2) -- (J1) --(J2) -- (0,-2); 
	\end{scope}	
	\begin{scope}[shift={(4,0)}];
		\node[circle, draw] (J) at (0,0) {$J$};
		\node (A1) at (3,1)  {$A_{t}$};
		\node (A2) at (3,-1)  {$A_{t}$};
		\node[circle,draw,fill=black, minimum size = 0.2pt]  (V) at (1.5,0) {};  
		\draw[decorate, decoration={snake}] (J) -- (1.5,0) --  (A1);
		\draw[decorate, decoration={snake}] (1.5,0) --(A2);
		\draw (0,2) -- (J)-- (0,-2);
	\end{scope}
	\end{tikzpicture}
	\caption{Cancellation of the gauge anomaly of these two diagrams leads to the equation for the commutation relations involving the currents $J[k]$.
	\label{fig:cancel1}}
\end{figure}

$\bullet$
Next, let's consider the classical commutation relation 
\begin{equation}\label{eqn:rel2}
[J_a [k] , K_b [\ell]] = f_{ab}^c K_{c} [k+\ell]
\end{equation}

The BRST variation of the term \brian{write path integral above} in the path integral vanishes provided
\[
\int_t \sum_k \frac1{k!} \partial_z^k \left(f_{bc}^a \fc^b(t) B^c_t (t) \right) K_a[k] (t) = \int_t \sum_{\ell,m} \frac1{\ell!} \frac1{m!} \partial^\ell \fc^d (t) \partial^m B^e (t) [J_d (t), K_e(t)]  .
\] 
To obtain the commutation relation \eqref{eqn:rel2}, one sets 
\begin{align*}
B_t & = \ft_b z^{m} \delta_{t=0} \\
\fc & = \ft_a z^\ell .
\end{align*}

This commutation relation is equivalent to the cancellation of the gauge variation of the tree-level Feynman diagrams in Figure~\ref{fig:cancel2}.

\begin{figure}
	\begin{tikzpicture}
	\begin{scope}
		\node[circle, draw] (J1) at (0,1) {$J$};
		\node[circle, draw] (J2) at (0,-1) {$K$};
		\node (A1) at (2,1)  {$A_{t}$};
		\node (A2) at (2,-1)  {$B_{t}$};
		\draw[decorate, decoration={snake}] (J1) --(A1);
		\draw[decorate, decoration={snake}] (J2) --(A2);
		\draw (0,2) -- (J1) --(J2) -- (0,-2); 
	\end{scope}	
	\begin{scope}[shift={(4,0)}];
		\node[circle, draw] (J) at (0,0) {$K$};
		\node (A1) at (3,1)  {$A_{t}$};
		\node (A2) at (3,-1)  {$B_{t}$};
		\node[circle,draw,fill=black, minimum size = 0.2pt]  (V) at (1.5,0) {};  
		\draw[decorate, decoration={snake}] (J) -- (1.5,0) --  (A1);
		\draw[decorate, decoration={snake}] (1.5,0) --(A2);
		\draw (0,2) -- (J)-- (0,-2);
	\end{scope}
	\end{tikzpicture}
	\caption{Cancellation of the gauge anomaly of these two diagrams leads to the equation for the commutation relations involving $J[k]$ and $K[\ell]$.
	\label{fig:cancel2}}
\end{figure}

\subsection*{Quantum corrections}

We now turn to quantum corrections to the Koszul dual algebra.

The second diagram in Figure \ref{fig:cancel3} has a gauge anomaly.
We will show that this gauge anomaly is proportional to 
\[
\hbar \int_{\RR \times \{z=0\}} \partial_z \fc^a \kappa^{bc} f_{ab}^d J_{c} K_{d} + \cdots .
\]
The ellipses denote similar terms present in the anomaly which involve a higher number of holomorphic $z$-derivatives 

The second diagram in Figure \ref{fig:cancel4} also has a gauge anomaly.
We will show that this gauge anomaly is proportional to 
\[
\hbar \int_{\RR \times \{z=0\}} \partial_z \fc^a \kappa^{bc} f_{ab}^d K_{c} K_{d} + \cdots .
\]


\begin{figure}
	\begin{tikzpicture}
	\begin{scope}
		\node[circle, draw] (J) at (0,0) {$J$};
		%\node[circle, draw] (J2) at (0,-1) {$K$};
		\node (A) at (2,0)  {$A_{t}$};
		%\node (A2) at (2,-1)  {$B_{t}$};
		\draw[decorate, decoration={snake}] (J) --(A);
		%\draw[decorate, decoration={snake}] (J2) --(A2);
		\draw (0,2) -- (J) -- (0,-2); 
	\end{scope}	
	\begin{scope}[shift={(4,0)}];
		\node[circle, draw] (K) at (0,1) {$K$};
		\node[circle, draw] (J) at (0,-1) {$J$};
		\node (A) at (3,0)  {$A_{t}$};
		%\node (A2) at (3,-1)  {$B_{t}$};
		\node[circle,draw,fill=black, minimum size = 0.2pt]  (V) at (1.5,0) {};  
		\draw[decorate, decoration={snake}] (J) -- (1.5,0);
		\draw[decorate, decoration={snake}] (1.5,0) --(A);
		\draw[decorate, decoration={snake}] (K) -- (1.5,0);
		\draw (0,-2) -- (J) -- (K) -- (0,2);
	\end{scope}
	\end{tikzpicture}
	\caption{Cancellation of the gauge anomaly of these two diagrams leads to the $\hbar$-linear correction to the differential $\d J[k]$.
	\label{fig:cancel3}}
\end{figure}

\begin{figure}
	\begin{tikzpicture}
	\begin{scope}
		\node[circle, draw] (K) at (0,0) {$K$};
		%\node[circle, draw] (J2) at (0,-1) {$K$};
		\node (B) at (2,0)  {$B_{t}$};
		%\node (A2) at (2,-1)  {$B_{t}$};
		\draw[decorate, decoration={snake}] (K) --(B);
		%\draw[decorate, decoration={snake}] (J2) --(A2);
		\draw (0,2) -- (K) -- (0,-2); 
	\end{scope}	
	\begin{scope}[shift={(4,0)}];
		\node[circle, draw] (K1) at (0,1) {$K$};
		\node[circle, draw] (K2) at (0,-1) {$K$};
		\node (B) at (3,0)  {$B_{t}$};
		%\node (A2) at (3,-1)  {$B_{t}$};
		\node[circle,draw,fill=black, minimum size = 0.2pt]  (V) at (1.5,0) {};  
		\draw[decorate, decoration={snake}] (K1) -- (1.5,0);
		\draw[decorate, decoration={snake}] (1.5,0) --(B);
		\draw[decorate, decoration={snake}] (K2) -- (1.5,0);
		\draw (0,-2) -- (K2) -- (K1) -- (0,2);
	\end{scope}
	\end{tikzpicture}
	\caption{Cancellation of the gauge anomaly of these two diagrams leads to the $\hbar$-linear correction to the differential $\d K[k]$.
	\label{fig:cancel4}}
\end{figure}




%Two steps:
%\begin{itemize}
%\item There is a relation in the algebra of local operators of the form
%\[
%[B^b, B^c] = \hbar f^{bc}_a \partial_z B^a + O(\hbar^2)  .
%\]
%This gives rise to a term in the differential on the Koszul dual algebra of the form
%\[
%\d (z \ep \ft_a) = \hbar  f^{bc}_a (\ep \ft_b) \otimes (\ep \ft_c) + O(\hbar^2) .
%\]
%\item There is a relation in the algebra of local operators of the form
%\[
%[B^b, \fc^c] = \hbar f^{bc}_a \partial_z \fc^a + O(\hbar^2) .
%\]
%This gives rise to a term in the differential on the Koszul dual algebra of the form
%\[
%\d (z \ft_a) = \hbar  f^{bc}_a (\ep \ft_b) \otimes (\ft_c) + O(\hbar^2) .
%\]
%\brian{do I need to symmetrize?}
%\end{itemize}
\section{Higher dimensional defects} 

%higher dimensional topological defects. PSM in 3dCS. 
%Kapustin--Salina.
%Check refs by Mnev et al on BV-BFV?

\begin{thebibliography}{KWWY14}

\bibitem[ACNV17]{ACNV}
M.~Aganagic, K.~Costello, J.~McNamara and C.~Vafa,
``Topological Chern-Simons/Matter Theories,''
[arXiv:1706.09977 [hep-th]].

\bibitem[CDG20]{CDG}
K.~Costello, T.~Dimofte and D.~Gaiotto,
``Boundary Chiral Algebras and Holomorphic Twists,''
[arXiv:2005.00083 [hep-th]].

\bibitem[MW97]{MW97}
G.~W.~Moore and E.~Witten,
``Integration over the u plane in Donaldson theory,''
Adv. Theor. Math. Phys. \textbf{1}, 298-387 (1997)
doi:10.4310/ATMP.1997.v1.n2.a7
[arXiv:hep-th/9709193 [hep-th]].

\bibitem[W88]{W88}
E.~Witten,
``Topological Quantum Field Theory,''
Commun. Math. Phys. \textbf{117}, 353 (1988)
doi:10.1007/BF01223371

\bibitem[WZ92]{WZ92}
E.~Witten and B.~Zwiebach,
``Algebraic structures and differential geometry in 2-D string theory,''
Nucl. Phys. B \textbf{377}, 55-112 (1992)
doi:10.1016/0550-3213(92)90018-7
[arXiv:hep-th/9201056 [hep-th]].


\end{thebibliography}

\end{document}